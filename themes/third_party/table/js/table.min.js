$(document).ready(function(){var a=200,b=100,c=3,d=3,e=[0],f=[],g=!1,h=!1,i=!1,j=!1,k=!1;$.closest=function(a,b){var c=null,d=-1;return $.each(b,function(){(null===c||Math.abs(this-a)<Math.abs(c-a))&&(c=this,d++)}),{position:d,closest:c}},$.addRowDragger=function(a){$(".table__table").append('<div class="drag-row icon-reorder" style="top:'+(a-1)*b+'px" data-row="'+a+'"></div>'),$(".table__table").append('<div class="table__table__delete-row icon-remove-circle" style="top: '+(a*b-b/2-5)+'px" data-row="'+a+'"></div>')},$.addColDragger=function(b){$(".table__table").append('<div class="drag-col icon-reorder" style="left:'+(b*a-19)+'px" data-col="'+b+'"></div>')},$.addTransitionsClass=function(){$(".table__table .table__cell").addClass("transitions")},$.updateTableCells=function(){for(var a=0,b=1;d+1>b;b++)for(var e=1;c+1>e;e++)a++,$('.table__table .table__cell[data-row="'+b+'"][data-col="'+e+'"] :first-child').attr("tabindex",a)},$.getTable=function(){return $(".table__table")},$.getTableLeftBar=function(){return $(".table__table__left__bar")},$.getTableCells=function(){return $(".table__table .table__cell")},$.getTableCol=function(a){return $(".table__table .table__cell[data-col="+a+"]")},$.getTableRow=function(a){return $('.table__table .table__cell[data-row="'+a+'"]')},$.getTableRowDragger=function(a){return $(void 0!==a?'.drag-row[data-row="'+a+'"]':".drag-row")},$.getTableColDragger=function(a){return $(void 0!==a?'.drag-col[data-col="'+a+'"]':".drag-col")},$.getTableRowDeleteLink=function(a){return $(void 0!==a?'.table__table__delete-row[data-row="'+a+'"]':".table__table__delete-row")},$.updateTableRow=function(a,c){var d=a,f=$.getTableRow(a),g=$.getTableRowDragger(a),h=$.getTableRowDeleteLink(a);void 0!==c&&(d=a+c,f.data("row",d),f.attr("data-row",d),g.data("row",d),g.attr("data-row",d),h.data("row",d),h.attr("data-row",d));var i=e[d-1];g.css("top",i+"px"),f.css("top",i+"px"),console.log("delete-link="+h),h.css("top",i+b/2-5+"px")},$.updateRowPositionsCache=function(){e=[];for(var a=0;d>a;a++){var c=a*b;e.push(c)}};var l=0,m=0;$.addRowDragger(1),$.getTableCells().each(function(){l>=c&&(l=0,m++,$.addRowDragger(m+1),e.push(m*b)),$(this).css("left",l*a),$(this).css("top",m*b),0===m&&(f.push(l*a),$.addColDragger(l+1)),l++}),setTimeout($.addTransitionsClass,500),$(".table__table__add-row").on("click",function(f){f.preventDefault();var g=$.getTable();g.css("height",$(".table__table").height()+b);var h=d+1,i=d*b;$.addRowDragger(h);for(var j=0;c>j;j++)g.append('<div style="top:'+i+"px; left:"+j*a+'px" class="table__cell transitions" data-row="'+h+'" data-col="'+(j+1)+'"><textarea></textarea></div>');e.push(i),d++,$.updateTableCells()}),$(".table__table__add-col").on("click",function(e){e.preventDefault();var g=$.getTable();g.css("width",$(".table__table").width()+a);var h=c+1,i=c*a;$.addColDragger(h);for(var j=0;d>j;j++)g.append('<div style="top:'+j*b+"px; left:"+i+'px" class="table__cell transitions" data-row="'+(j+1)+'" data-col="'+h+'"><textarea></textarea></div>');f.push(i),c++,$.updateTableCells()}),$(document).on("click",".table__table__delete-row",function(){var a=$(this).data("row"),c=$.getTableRow(a),e=$.getTableRowDragger(a),f=$.getTableRowDeleteLink(a),g=$.getTable();if(c.addClass("table__cell-pending-delete"),confirm("Sure you want to delete the row?")){c.remove(),e.remove(),f.remove(),d--,g.css("height",b*d),$.updateRowPositionsCache();for(var h=a;d>=h;h++)$.updateTableRow(h+1,-1);$.updateTableCells()}else c.removeClass("table__cell-pending-delete")}),$(document).on("mousedown",".drag-row",function(a){a.preventDefault(),a.stopPropagation(),$(this).addClass("active__dragging__link");var b=$(this).data("row"),c=$.getTableRow(b);return c.removeClass("transitions").addClass("table__dragging__element"),$.getTableRowDeleteLink().fadeOut(),$(".drag-row").not(".active__dragging__link").fadeOut(),g=!0,h=b,i=!1,!1}),$(document).on("mousedown",".drag-col",function(a){a.preventDefault(),a.stopPropagation(),$(this).addClass("active__dragging__link");var b=$(this).data("col");return $.getTableCol(b).removeClass("transitions").addClass("table__dragging__element"),$(".drag-col").not(".active__dragging__link").fadeOut(),g=!0,i=b,h=!1,!1}),$(document).on("mousemove",function(c){if(c.preventDefault(),g){var d=$.getTable();if(h){k=c.pageY-d.offset().top;var l=$(".drag-row.active__dragging__link");l.css("top",k+"px"),l.css("left","-20px"),l.css("position","absolute"),$(".table__dragging__element").each(function(){$(this).css("top",k+"px")});var m=$.closest(k,e),n=m.position+1;if(m.position+1>h){var o=m.position+1,p=m.closest-b;$.getTableRow(o).each(function(){$(this).css("top",p+"px"),$(this).attr("data-row",o-1),$(this).data("row",o-1)}),$(".table__dragging__element").each(function(){$(this).attr("data-row",n+1),$(this).data("row",n+1)}),h=n+1}else if(m.position+1<h){var q=m.position+1,r=q*b;$.getTableRow(q).each(function(){$(this).css("top",r+"px"),$(this).attr("data-row",q+1),$(this).data("row",q+1)}),$(".table__dragging__element").each(function(){$(this).attr("data-row",n),$(this).data("row",n)}),h=n}}else if(i){j=c.pageX-d.offset().left-a;var s=$(".drag-col.active__dragging__link");s.css("top","-20px"),s.css("left",j+a-19+"px"),s.css("position","absolute"),$(".table__dragging__element").each(function(){$(this).css("left",j+"px")});var t=$.closest(j,f),u=t.position+1;if(u>i){var v=(t.position-1)*a;$.getTableCol(u).each(function(){$(this).css("left",v+"px"),$(this).attr("data-col",u-1),$(this).data("col",u-1)}),$(".table__dragging__element").each(function(){$(this).attr("data-col",u),$(this).data("col",u)}),i=u}else if(i>u){var w=(t.position+1)*a;$.getTableCol(u).each(function(){$(this).css("left",w+"px"),$(this).attr("data-col",u+1),$(this).data("col",u+1)}),$(".table__dragging__element").each(function(){$(this).attr("data-col",u),$(this).data("col",u)}),i=u}}}return!1}),$(document).on("mouseup",function(c){if(c.preventDefault(),g=!1,$(".active__dragging__link").removeClass("active__dragging__link"),h){$.getTableRowDeleteLink().fadeIn();var d=$.closest(k,e),l=d.closest;$(".table__dragging__element").css("top",l+"px");var m=1;$.getTableRowDragger().each(function(){$(this).css("top",(m-1)*b+"px"),$(this).attr("data-row",m),$(this).data("row",m),m++,$(this).show()})}else if(i){var n=$.closest(j,f),o=n.closest;$(".table__dragging__element").css("left",o+"px");var p=1;$.getTableColDragger().each(function(){$(this).css("left",p*a-19+"px"),$(this).attr("data-col",p),$(this).data("col",p),p++,$(this).show()})}return $.getTableCells().removeClass("table__dragging__element").addClass("transitions"),$.updateTableCells(),h=!1,i=!1,!1})});
//# sourceMappingURL=table.min.map